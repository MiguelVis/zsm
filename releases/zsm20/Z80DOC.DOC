

		Z
		 8
		  0
		   A
		    S
		     M


		ZILOG/MOSTEK

		Z80-CPU


		ASSEMBLY
			LANGUAGE
				PROCESSOR


		(C) COPYRIGHT 1977 LCS
		ALL RIGHTS RESERVED


		LATEST REVISION:	21-JULY-1977


	Z 8 0 A S M

	Z80ASM IS AN ASSEMBLER FOR THE ZILOG/MOSTEK Z80-CPU MICROPROCESSOR.

IT IS DESIGNED TO RUN UNDER THE CP/M OPERATING SYSTEM FROM DIGITAL RESEARCH.

CP/M WILL RUN ON EITHER AN 8080A SYSTEM OR A Z80 SYSTEM.  Z80ASM WILL RUN

IN THE CP/M MINIMUM (16K) SYSTEM BUT WILL UTILIZE MORE MEMORY FOR SYMBOL

TABLE STORAGE IN LARGER (UP TO 64K) CP/M SYSTEMS.

	Z80ASM READS A SOURCE (ASM) FILE PRODUCED BY THE CP/M 'ED' TEXT EDITOR

PROGRAM AND PRODUCES AN OPTIONAL LISTING (ON THE LST: DEVICE) AND AN OPTIONAL

OBJECT CODE (HEX) FILE IN INTEL FORMAT HEX.  THE 'HEX' FILE CAN BE LOADED

FOR EXECUTION USING 'DDT' OR 'LOAD' COMMANDS OF CP/M OR IT CAN BE PUNCHED

ON PAPER TAPE USING THE 'PIP' PROGRAM.

	INPUT STATEMENTS ARE FREE FORMAT (I.E. NOT COLUMN ORIENTED).  BETWEEN

FIELDS ANY NUMBER OF BLANK OR TAB CHARACTERS MAY BE PRESENT BUT WITHIN A FIELD

THERE MAY BE NO BLANK OR TAB CHARACTERS.  HOWEVER, STATEMENTS LABELS MUST BE

IN THE FIRST POSITION OF THE LINE.  STATEMENT LABELS MAY HAVE A COLON FOLLOWING

THEM BUT THE COLON IS NOT REQUIRED.  COMMENTS ARE PRECEEDED BY A SEMICOLON

AND MAY APPEAR BY THEMSELVES OR FOLLOWING ALL OF THE FIELDS ON A SOURCE LINE.


	ALL THE ZILOG/MOSTEK MNEMONICS ARE SUPPORTED WITH THE FOLLOWING

EXCEPTIONS:

	1. THE Z80CPU TECHNICAL MANUAL HAS CONFLICTING INFORMATION REGARDING
	   THE SYNTAX OF THE RLC,RL,RRC AND RR INSTRUCTIONS WHEN THE A
	   REGISTER IS USED AS THE OPERAND.  ON PAGE 50 THE FORMS
	   'RLCA','RLA','RRCA','RRA' ARE USED WHILE ON PAGE 68 THE FORM
	   'RR A' IS SHOWN.  Z80ASM WILL SUPPORT ONLY THE 'RRA', ETC. FORM.

	2. THE Z80CPU MANUAL DOES NOT DESCRIBE THE PSEUDO OPERATORS AVAILABLE
	   EXCEPT THAT 'EQU' AND 'DEFS' ARE USED ON PAGE 67 IN THE SAMPLE
	   PROGRAM.  THE LIST BELOW DESCRIBES THE PSEUDO OPERATORS AVAILABLE
	   IN Z80ASM AND THEIR ARGUMENT FORMATS:

	<LABEL> EQU	<EXPRESSION>	ASSIGN VALUE TO LABEL
		ORG	<EXPRESSION>	ASSIGN VALUE TO PROGRAM COUNTER
		DEFS	<EXPRESSION>	RESERVE STORAGE
		DEFW	<EXPRESSION>	DEFINE WORD (2 BYTES)
		DEFB	<EXPRESSION>	DEFINE BYTE (FORMAT 1)
		DEFB	'-STRING-'	DEFINE BYTE (FORMAT 2)
		EJECT			LISTING EJECT
		END	<EXPRESSION>	DEFINE EXECUTION ADDRESS

	   NOTE: FOR DEFW AND DEFB ONLY ONE OPERAND IS ALLOWED.


	EXPRESSIONS:

	EXPRESSIONS MAY BE ANY NUMBER OF THE ITEMS LISTED BELOW SEPERATED

BY + , - , AND * FOR ADDITION, SUBTRACTION, AND MULTIPLICATION RESPECTIVELY.

	EXPRESSION ELEMENTS:

		<LABEL> 	1 TO 11 CHARACTER STATEMENT LABEL
		<NUMBER>H	HEXADECIMAL NUMBER
		<NUMBER>B	BINARY (BIT) NUMBER
		<NUMBER>	DECIMAL NUMBER
		   $		PROGRAM COUNTER REFERENCE
		  'X'		X=ANY PRINTABLE CHARACTER

	EXAMPLES OF EXPRESSIONS ARE:

		LABEL1+5
		0FFH
		10100001B+6
		$-6
		'9'+1


	THE INPUT FILE MUST HAVE AN EXTENSION OF 'ASM' AND THE OUTPUT FILE

WILL HAVE AN EXTENSION OF 'HEX' IF IT IS CREATED.  Z80ASM IS CALLED USING

A COMMAND WITH THE FOLLOWING FORMAT:

	Z80ASM <FILENAME>.<AB>

	<FILENAME>	1 TO 8 CHARACTER CP/M FILE NAME (MUST BE .ASM)
	<AB>		OPTION CONTROLS-
					A=Y OR N FOR LISTING
					B=Y OR N FOR HEX FILE
			IF <FILENAME> ONLY FORMAT IS USED THE A AND B
			DEFAULT TO YY

	NOTE: EVEN IF THE LISTING IS NOT REQUESTED ANY ERRORS THAT WILL OCCUR

WILL BE LISTED ON THE LST: DEVICE.
